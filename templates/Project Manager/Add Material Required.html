{% extends "Project Manager/pmindex.html" %}
{% block body %}
<form id="form1" name="form1" method="post" action="/WMS/Add_material_required_post/">
    {% csrf_token %}
<div style="color: blue"><h3>Add Material Required</h3></div>
  <table width="200" border="1" class="table table-striped">
      <input type="hidden" name="pid" value="{{ data.id }}">
    <tr>
        <td>Category</td>
       <td>
             <select name="category" id="select" class="form-control tag" required="">
                 <option value="Preliminaries">Preliminaries</option>
                 <option value="Electrical">Electrical</option>
                 <option value="Fire Alarm ">Fire Alarm </option>
                 <option value="HVAC ">HVAC </option>
                 <option value="Fire Fighting">Fire Fighting</option>
                 <option value="Flooring">Flooring</option>
                 <option value="Ceiling">Ceiling</option>
                 <option value="Gypsum Cladding">Gypsum Cladding</option>
                 <option value="Glass Partition">Glass Partition</option>
                 <option value="Cleaning">Cleaning</option>
                 <option value="Demolition">Demolition</option>
                 <option value="Shop Front">Shop Front</option>
                 <option value="Joinery Work">Joinery Work</option>
                 <option value="Painting">Painting</option>
             </select>
      </td>
    </tr>
    <tr>
      <td>Material</td>
     <td>
     <input type="text" list="programmingLanguages" placeholder="Enter Here" name="material" id="materialInput" class="form-control" required=""/>
<datalist id="programmingLanguages">
    {% for i in data2 %}
        <option value="{{ i.name }}&nbsp;{{ i.unit }}" data-id="{{ i.id }}">{{ i.name }}&nbsp;{{ i.unit }}</option>
    {% endfor %}
</datalist>
<input type="hidden" id="idField" name="material" value="{{ i.id }}" />
{#             <select name="material" id="select" class="form-control tag">#}
{#         {% for i in data2 %}#}
{#            <option value="{{ i.id }}">{{ i.name }}&nbsp;{{ i.unit }}</option>#}
{#         {% endfor %}#}
{#             </select>#}
    </tr>
    <tr>
      <td>Quantity</td>
      <td><input type="text" name="quantity" id="textfield3" class="form-control" required=""/></td>
    </tr>
    <tr>
      <td>Price/unit</td>
      <td><input type="text" name="price" id="textfield3" class="form-control" required=""/></td>
    </tr>
    <tr align="center">
      <td colspan="2"><input type="submit" name="button3" id="button3" value="Add" class="btn btn-outline-primary"/></td>
    </tr>
  </table>
</form>
<script>
    const materialInput = document.getElementById('materialInput');
    const idField = document.getElementById('idField');
    materialInput.addEventListener('input', () => {
        const selectedOption = document.querySelector(`#programmingLanguages option[value="${materialInput.value}"]`);
        if (selectedOption) {
            const id = selectedOption.getAttribute('data-id');
            idField.value = id || '';
        } else {
            idField.value = '';
        }
    });
</script>

{% endblock %}
