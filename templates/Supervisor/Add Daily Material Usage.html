{% extends "Supervisor/spindex.html" %}
{% block body %}
<form id="form1" name="form1" method="post" action="/WMS/Add_daily_material_usage_post/">
    {% csrf_token %}
<div style="color: blue"><h3>Add Material Usage</h3></div>
  <table width="200" border="1" class="table table-striped">
      <input type="hidden" value="{{ data.id }}" name="pid">
      <input type="hidden" value="{{ id }}" name="id">
    <tr>
      <td>Material</td>
      <td>
{#             <select name="material" id="select" class="form-control">#}
{#         {% for i in data1 %}#}
{#            <option value="{{ i.id }}">{{ i.name }}{{ i.unit }}</option>#}
{#         {% endfor %}#}
{#             </select>#}
       <input type="text" list="programmingLanguages" placeholder="Enter Here" name="material" id="materialInput" class="form-control"/>
    <datalist id="programmingLanguages">
        {% for i in data1 %}
            <option value="{{ i.name }}&nbsp;{{ i.unit }}" data-id="{{ i.id }}">{{ i.name }}&nbsp;{{ i.unit }}</option>
        {% endfor %}
    </datalist>
    <input type="hidden" id="idField" name="material" value="{{ i.id }}" />
      </td>
    </tr>
    <tr>
      <td>Quantity</td>
      <td><input type="text" name="quantity" id="textfield4" class="form-control"/></td>
    </tr>
    <tr align="center">
      <td colspan="2"><input type="submit" name="button3" id="button3" value="Add" class="btn btn-outline-primary"/></td>
    </tr>
  </table>
</form>
     <script>
    const materialInput = document.getElementById('materialInput');
    const idField = document.getElementById('idField');
    materialInput.addEventListener('input', () => {
        const selectedOption = document.querySelector(`#programmingLanguages option[value="${materialInput.value}"]`);
        if (selectedOption) {
            const id = selectedOption.getAttribute('data-id');
            idField.value = id || '';
        } else {
            idField.value = '';
        }
    });
</script>
{% endblock %}
